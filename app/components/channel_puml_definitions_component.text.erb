' Channel <%= channel.name %>
' Definitions
queue <%= ch_alias %> as "<%= channel.puml[:text] %>"
url of <%= ch_alias %> is [[<%= channel_path(channel) %>]]
<%= source.puml[:type] %> <%= ch_alias %>_src as "<%= source.puml[:text] %>"

<% destinations.each do |dest| %>
  <% if (scope == :channel) or dest.puml[:destination_channel_id].nil? %>

    <%= dest.puml[:type] %> <%= ch_alias %>_dst_<%= dest.meta_data_id %> as "<%= dest.puml[:text] %>"
    <% unless dest.puml[:host].nil? %>
      note bottom of <%= ch_alias %>_dst_<%= dest.meta_data_id %>
        <%= dest.puml[:host].name %> (<%= dest.puml[:host].location&.lid %>)
        <%= dest.puml[:host].software_group %>
      end note
      url of <%= ch_alias %>_dst_<%= dest.meta_data_id %> is [[<%= host_path(dest.puml[:host]) %>]]
    <% end %>
  <% end %>
<% end %>

