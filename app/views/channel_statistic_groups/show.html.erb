<%= render 'shared/turbo-cache-control' %>

<div class="card mb-3">
  <div class="card-header">
    <div class="d-flex w-100 justify-content-between">
      <div>
        <span class="subtitle">
          <%= t('activerecord.models.channel_statistic_group') %>: 
          #<%= @channel_statistic_group.id %>
        </span>
        <h4 class="title"><%= @channel_statistic_group %></h4>
      </div>
      <div role="toolbar" class="pt-3">
        <%= edit_link(@channel_statistic_group) %>
        <%= delete_link(@channel_statistic_group) %>
      </div>
    </div>
  </div>

  <div class="card-body">
    <table class="table table-sm table-borderless">
    
      <tr>
        <th class="w-10 pe-3"><%= t('attributes.name')%>:</th>
        <td><%= @channel_statistic_group.name %></td>
      <tr>
      </tr>
        <th class="w-10 pe-3"><%= t('controller.channel_statistics')%>:</th>
        <td><%= @channel_statistic_group.channel_statistics.map(&:fullname).join("<br />").html_safe %></td>

      </tr>
    </table>
  </div>
</div>

<%= back_link %>
<%= new_link ChannelStatisticGroup %>

<div class="card my-3">
  <div class="card-header">
    <div class="d-flex w-100 justify-content-between">
      <div>
        <h4 class="title">
          <%= t('controller.escalation_levels') %>
        <h4>
      </div>
      <div role="toolbar" class="">
        <%= new_link([@channel_statistic_group, EscalationLevel], class: 'btn btn-sm btn-outline-secondary') %>
      </div>
    </div>
  </div>

  <div class="card-body">
    <%= render partial: 'escalation_levels/index', 
               locals: { escalatable: @channel_statistic_group,
                         escalation_levels: @channel_statistic_group.escalation_levels,
                         simple: true }
     %>
  </div>
</div>

<div class="card my-3">
  <div class="card-header">
    <div class="d-flex w-100 justify-content-between">
      <div>
        <h4 class="title">
          <%= t('controller.channel_statistics') %>
        <h4>
      </div>
      <div role="toolbar" class="pt-3">
      </div>
    </div>
  </div>

  <div class="card-body">
    <%= render partial: 'channel_statistics/index',
               locals: {
                 server: nil,
                 channel_statistics: @channel_statistic_group.channel_statistics } %>

  </div>
</div>

