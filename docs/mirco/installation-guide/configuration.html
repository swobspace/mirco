<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuration :: Mirco Dokumentation</title>
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Mirco Dokumentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div class="abstand">
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
           <a class="navbar-item" href="../../devnotes/index.html">DevNotes</a>
          <div class="navbar-item dark">Mirco</div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="mirco" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Mirco</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../user-manual/index.html">Benutzer-Handbuch</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Admin Manual</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../admin-manual/scheduling.html">Job Scheduling</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../admin-manual/timescale.html">TimescaleDB</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">PostgreSQL Maintenance</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../admin-manual/postgresql/backuprestore.html">Backup &amp; Restore with timescaledb</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../admin-manual/postgresql/upgrade.html">Upgrade mit Timescale</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../admin-manual/postgresql/migration-to-podman.html">Migrate database to podman containers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../admin-manual/escalation-levels.html">Escalation Levels</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="podman/quickstart.html">Quick start</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="podman/podman-systemd.html">production: systemd + quadlets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="podman/reverse-proxy.html">Reverse Proxy</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="configuration.html">Configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../mirth.html">Mirth</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../about.html">Ãœber Mirco</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Mirco</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../devnotes/index.html">DevNotes</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../devnotes/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Mirco</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">default</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Mirco</a></li>
    <li><a href="index.html">Installation</a></li>
    <li><a href="configuration.html">Configuration</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Configuration</h1>
<div class="sect1">
<h2 id="_mirco_yml"><a class="anchor" href="#_mirco_yml"></a><code>mirco.yml</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The main configuration file is <code>mirco.yml</code>.</p>
</div>
<div class="sect2">
<h3 id="_global_settings"><a class="anchor" href="#_global_settings"></a>global settings</h3>
<div id="mirco.yml" class="listingblock">
<div class="title">mirco.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">#
# config/mirco.yml
#
# -- job scheduling
cron_fetch_statistics: '*/5 * * * *' <i class="conum" data-value="1"></i><b>(1)</b>
cron_fetch_channels: '0 1 * * 6' <i class="conum" data-value="2"></i><b>(2)</b>
cron_fetch_configuration: '15 1 * * 6' <i class="conum" data-value="3"></i><b>(3)</b>
cron_purge_timescale:  '30 1 * * 6' <i class="conum" data-value="4"></i><b>(4)</b>

# -- SSL
use_ssl: false <i class="conum" data-value="5"></i><b>(5)</b>

# -- action cable request origins
action_cable_allowed_request_origins: <i class="conum" data-value="6"></i><b>(6)</b>
  - http://mirco.example.com
  - https://mirco.example.com</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>How often should Mirco retrieve channel statistics from your Mirth Connect servers?</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Update channel configuration once per week</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Backup mirth configuration (XML only) once per week</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Purge old timescaledb data once per week</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Should be false if you are running Mirco behind a reverse proxy.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>http:// and https:// site Urls accessing Mirco from outside</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_smtp_settings"><a class="anchor" href="#_smtp_settings"></a>SMTP settings</h3>
<div class="listingblock">
<div class="title">Example smtp settings</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">smtp_settings:
  address: smtp.example.com <i class="conum" data-value="1"></i><b>(1)</b>
  port: 25 <i class="conum" data-value="2"></i><b>(2)</b>
  domain: sender.example.com <i class="conum" data-value="3"></i><b>(3)</b>
  enable_starttls_auto: false <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Mail relay host</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>smtp port</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>sender domain (optional)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>depends on your relay host</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Example settings for gmail can be found at <a href="https://guides.rubyonrails.org/v7.2/action_mailer_basics.html#action-mailer-configuration-for-gmail" class="bare">https://guides.rubyonrails.org/v7.2/action_mailer_basics.html#action-mailer-configuration-for-gmail</a>. Hint: you can&#8217;t use <code>Rails.application.credentials</code> stuff, set user/password as cleartext in your config.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ldap_settings"><a class="anchor" href="#_ldap_settings"></a>LDAP settings</h3>
<div class="paragraph">
<p>You can use LDAP to create new users and for authentication.
In most cases you will use both or neither. LDAP is completely
optional, so you can choose not to use it. <code>ldap_options</code>
goes directly to Net::LDAP, see the following page for configuration:
<a href="https://www.rubydoc.info/gems/ruby-net-ldap/Net/LDAP" class="bare">https://www.rubydoc.info/gems/ruby-net-ldap/Net/LDAP</a></p>
</div>
<div class="paragraph">
<p>The LDAP attribute <code>userPrincipalName</code> is mapped to <code>username</code>. LDAP authentication works best with Active Directory. If you are using another directory service, you are on your own.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">enable_ldap_authentication: true
ldap_options:
  hosts:
    - [ dc1.example.com, 3269 ]
    - [ dc2.example.com, 3269 ]
  base: dc=example,dc=de
  encryption: :simple_tls
  auth:
    method: :simple
    username: readonlyuser@example.com
    password: averystrongsecret</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <span>Wolfgang Barth (C) 2021-2024</span>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/medium-zoom.min.js"></script>
<script>mediumZoom('img:not(.copy-icon');</script>
  </body>
</html>
